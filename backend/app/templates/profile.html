{% extends "base.html" %}
{% block title %}{{request.user.username}}'s Confessions{% endblock title %}

{% block content %}

{% if user %}
<div class="my-5 px-5">

    <div class="d-flex">
        <div>
            <p class="h3">{{user.username|capfirst}}</p>
            <p>{{user.username}} started using Confession {{user.date_joined|timesince}}</p>
        </div>

        <div class="ms-auto">

            <button id="logout-btn" class="btn btn-danger d-flex gap-2 justify-content-center align-items-center"
                style="font-size: 15px;">
                <i class="bi bi-box-arrow-left" style="font-size: 1.2rem;"></i>
                <strong class="fst-italic" style="font-size: 1.2rem;">logout</strong>
            </button>
        </div>

    </div>
    <hr>


    <div class="row justify-content-evenly g-4 mt-4">
        {% for confession in confessions %}
        {% include "components/confessionTemplate.html" %}
        {% empty %}
        <p class="h4">No Confessions yet</p>
        {% endfor %}
    </div>

</div>
{% else %}
{% include "components/404.html" %}
{% endif %}

<div class="position-fixed bottom-0 w-100 bg-dark d-flex py-2">
    <hr>
    <div class="container d-flex justify-content-center align-items-center gap-4 text-white">

        {% if confessions.has_previous %}
        <a class="btn btn-light" href="?page={{confessions.previous_page_number}}">prev &laquo;</a>
        {% else %}
        <button class="btn btn-light disabled">prev &laquo;</button>
        {% endif %}

        Page {{confessions.number}} of {{confessions.paginator.num_pages}}

        {% if confessions.has_next %}
        <a class="btn btn-light" href="?page={{confessions.next_page_number}}">next &raquo;</a>
        {% else %}
        <button class="btn btn-light disabled">next &raquo;</button>
        {% endif %}
    </div>
</div>


{% include "components/logoutPopup.html" %}

{% endblock content %}